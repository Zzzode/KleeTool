# KleeTool

This tool is primarily used to generate the LLVM IR that can be analyzed by Klee, relying on the JSON call chain
generated by dataflow analysis, and the LLVM intermediate code of the source program.

## Dependency

1. Our tools work correctly on Linux systems.

2. KLEE2.1 is required. We offer a special release based on KLEE2.1 modified to support some of the unique features
   we need.
   
3. In addition to the packages for KLEE, we also need RapidJSON (ver 1.1.0) and Boost (ver 1.75.0) to run our tool.

4. **The source code for all the above projects will be provided.**

## Build From Source

1. Create the `build` folder in the project root.

```shell
mkdir build
cd build
cmake ..
make -j4
```

- Our tool requires LLVM and Boost. If cmake cannot find either path correctly, try
  passing `-DBOOST_ROOT=/path/to/boost` and `-DLLVM_CONFIG_BINARY=/path/to/llvm-config` to Cmake.

- Binary executable file exists in the path of `KleeTool/bin/`.

## Tutorial

First of all, I need to set up a Dataset folder, the path according to their preferences, for example
in `~/Dataset/KleeTest`.

```shell script
mkdir KleeTest
cd KleeTest
```

The source code, LLVM intermediate code, and JSON are then put into the same folder with the same folder name as the
source file name.

For example, if I have three files called `test1.c, test1.ll, test1.JSON`, then I create a new folder called `test1`.

```shell script
mkdir test1
```

Similarly, put all the data sets into KleeTest. At this point, there should be multiple folders under the KleeTest
folder, respectively storing different source files.

Finally, run the KleeTool tool, taking the path to all the data set folders, such as KleeTest.

```shell script
$(KleeToolPath)/bin/KleeTool ~/Dataset/KleeTest/
```

## Others

Information about Klee, including source code and tutorials, can be found on the Klee website (http://klee.github.io/).

We provide a modified version of the Klee source code, which contains some of the special features needed for this
project.

